import { ArgsTable, Canvas, Description, Meta, Story } from '@storybook/addon-docs'

import { terminalContent } from '@/../.storybook/terminal_content'

import Binary from '@/mixins/bin.ts'

import Hello from '@/bins/Hello.vue'
import ChangeDir from '@/bins/ChangeDir.vue'
import Hostname from '@/bins/Hostname.vue'
import WhoAmI from '@/bins/WhoAmI.vue'
import WorkDir from '@/bins/WorkDir.vue'

<Meta
  title="Bins/Callable"
  component={Binary}
  decorators={[
    terminalContent,
  ]} />

# Callable binaries

see·el·aye comes with a set of built-in binaries for handling some common CLI
actions. These include the following.

## `hello`

<Description of={Hello} />

export const helloTemplate = () => ({
  components: { Hello },
  template: `
    <Hello/>
  `
})

<Canvas>
  <Story name="hello">
    { helloTemplate.bind({}) }
  </Story>
</Canvas>

## `cd`

<Description of={ChangeDir}/>

export const cdTemplate = (args) => ({
  components: { ChangeDir },
  setup() {
    return { args }
  },
  template: `
    <ChangeDir v-bind="args"/>
  `
})

<Canvas>
  <Story
    name="cd"
    argTypes={{
      '--verbose/-v': {
        table: {
          type: { summary: 'boolean' },
          defaultValue: { summary: false },
        },
        description: 'whether to display more messages on screen',
        control: null
      },
      'dirpath': {
        table: {
          type: { summary: 'string' },
          defaultValue: { summary: '~' },
        },
        description: 'the path or name of the directory to switch to',
        control: null
      },
    }}
    args={{
      argv: [
        '--verbose',
        '~/c'
      ]
    }}>
    { cdTemplate.bind({}) }
  </Story>
</Canvas>

<ArgsTable story="cd" />

## `hostname`

<Description of={Hostname} />

export const hostnameTemplate = () => ({
  components: { Hostname },
  template: `
    <Hostname/>
  `
})

<Canvas>
  <Story name="hostname">
    { hostnameTemplate.bind({}) }
  </Story>
</Canvas>

## `pwd`

<Description of={WorkDir} />

export const pwdTemplate = () => ({
  components: { WorkDir },
  template: `
    <WorkDir/>
  `
})

<Canvas>
  <Story name="pwd">
    { pwdTemplate.bind({}) }
  </Story>
</Canvas>

## `whoami`

<Description of={WhoAmI} />

export const whoamiTemplate = (args) => ({
  components: { WhoAmI },
  setup() {
    return { args }
  },
  template: `
    <WhoAmI v-bind="args"/>
  `
})

<Canvas>
  <Story
    name="whoami"
    argTypes={{
      '--groot/-g': {
        table: {
          type: { summary: 'boolean' },
          defaultValue: { summary: false },
        },
        description: 'whether to run command as Groot',
        control: null
      },
    }}
    args={{ argv: ['--groot'] }}>
    { whoamiTemplate.bind({}) }
  </Story>
</Canvas>

<ArgsTable story="whoami" />
